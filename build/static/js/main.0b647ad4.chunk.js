(this["webpackJsonpalton-coding-challenge"]=this["webpackJsonpalton-coding-challenge"]||[]).push([[0],{236:function(e,t,n){e.exports=n(424)},241:function(e,t,n){},242:function(e,t,n){},424:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(15),o=n.n(c),s=(n(241),n(242),n(56)),i=n(185),u=n(186),l=n(202),m=n(187),d=n(204),f=n(96),p="GET_VEHICLE_INFO",E="GET_CUSTOMERS_INFO",h=function(e){return{type:"GET_VEHICLE_INFO_SUCCESS",payload:e}},v=function(e){return{type:"GET_VEHICLE_INFO_FAILURE",payload:e}},g=function(e){return{type:"GET_CUSTOMERS_INFO_SUCCESS",payload:e}},O=function(e){return{type:"GET_CUSTOMERS_INFO_FAILURE",payload:e}},b=n(471),I=n(189),S=n.n(I),y=n(475),C=n(480),w=n(481),j=n(474),T=n(482),_=n(477),x=n(476),N=n(479),L=n(472),V=n(473),R=n(43),D=n.n(R),k=n(478),A=n(469),U=n(470),F=n(201),P=n.n(F),M=n(72),G=new S.a({en:{VEHICAL_OVERVIEW_STATUS:"Vehicle Status Overview",VEHICLE_REGISTERATION:"Vehicle Registeration",VEHICLE_ID:"Vehicle ID",ONLINE:"online",OFFLINE:"offline",ALL:"All",CUSTOMERS:"Customers",VID:"Vehicle ID",REGISTERATION_NUMBER:"Registration Number",CUSTOMER_NAME:"Customer Name",STATUS:"Status"},sweedish:{VEHICAL_OVERVIEW_STATUS:"\xd6versikt \xf6ver fordonsstatus",VEHICLE_REGISTERATION:"Fordons registrering",VEHICLE_ID:"Fordons-ID",CUSTOMERS:"kunder",ONLINE:"online",ALL:"Allt",OFFLINE:"offline",VID:"Fordons ID",REGISTERATION_NUMBER:"Registrerings nummer",CUSTOMER_NAME:"K\xf6parens namn",STATUS:"Status"}}),H=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(m.a)(t).call(this,e))).getVehiclesOverview=function(e){var t=[];if(e&&e.length){var a=e.filter((function(e){return"online"===e.status})).length,r=e.filter((function(e){return"offline"===e.status})).length;t.push({name:"Online",value:a,color:"#7bd07b"},{name:"Offline",value:r,color:"#bb2b17"})}n.setState({overviewData:t})},n.getVehiclesData=function(e){var t=n.state,a=t.selectedCustomer,r=t.selectedStatus,c=D.a.groupBy(e,"customerId");a.length&&r?(c=e.filter((function(e){return e.status===r&&a.indexOf(e.customerId)>-1})),c=D.a.groupBy(c,"customerId")):a.length&&!r?(c=e.filter((function(e){return a.indexOf(e.customerId)>-1})),c=D.a.groupBy(c,"customerId")):!a.length&&r&&(c=e.filter((function(e){return e.status===r})),c=D.a.groupBy(c,"customerId")),n.setState({filteredData:c})},n.handleChange=function(e,t){n.setState(Object(s.a)({},t,e),(function(){n.getVehiclesData(n.props.data)}))},n.handleChangeLanguage=function(e){G.setLanguage(e.target.value),n.setState({selectedLanguage:e.target.value})},n.resetFilter=function(e){n.setState({selectedStatus:null,selectedCustomer:[]},(function(){n.getVehiclesData(n.props.data)}))},n.renderCustomerCards=function(e,t){return e&&e[t.id]?r.a.createElement(k.a,{key:t.id},r.a.createElement(A.a,{expandIcon:r.a.createElement(P.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},r.a.createElement("h4",{className:"customer-name"},"Customer: "),t.name),r.a.createElement(U.a,null,r.a.createElement("div",{className:"vehicle-container"},e[t.id].map((function(e,t){return r.a.createElement("div",{className:"car-container",style:{backgroundColor:"online"===e.status?"#7bd07b":"#bb2b17"},key:t},r.a.createElement("div",null,G.VEHICLE_REGISTERATION,": ",e.regNo," "),r.a.createElement("div",null,G.VEHICLE_ID,": ",e.id),r.a.createElement("div",null,G.STATUS,": ",e.status," "))}))))):null},n.state={simulateTime:6e4,selectedLanguage:"en",selectedCustomer:[],selectedStatus:"",filteredData:[],overviewData:[]},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.getVehiclesInfo(),this.props.getCustomersInfo(),setInterval((function(){var t=e.props.data,n=D.a.random(0,1),a=D.a.random(0,t.length-1);1===n&&(t[a].status="offline"===t[a].status?"online":"offline",e.getVehiclesData(t),e.getVehiclesOverview(t))}),this.state.simulateTime)}},{key:"componentWillReceiveProps",value:function(e){var t=this,n=D.a.groupBy(e.data,"customerId");this.setState({filteredData:n},(function(){t.getVehiclesOverview(t.props.data)}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.loading,a=t.customers,c=this.state,o=c.selectedLanguage,s=c.selectedCustomer,i=c.selectedStatus,u=c.overviewData,l=c.filteredData;return n?r.a.createElement(b.a,null):r.a.createElement(L.a,{maxWidth:"md","data-test":"appComponent"},r.a.createElement(V.a,{container:!0,spacing:3},r.a.createElement(V.a,{item:!0,xs:12},r.a.createElement("div",{className:"language-selector"},r.a.createElement(j.a,{className:"formControl"},r.a.createElement(C.a,null,"Language"),r.a.createElement(_.a,{native:!0,onChange:this.handleChangeLanguage,value:o},r.a.createElement("option",{value:"en"},"English"),r.a.createElement("option",{value:"sweedish"},"Sweedish"))))),r.a.createElement(V.a,{item:!0,xs:12},r.a.createElement("h1",{id:"vehicle-status-content"},G.VEHICAL_OVERVIEW_STATUS)),r.a.createElement(V.a,{item:!0,xs:4},r.a.createElement(j.a,{className:"formControl"},r.a.createElement("div",null,G.STATUS),r.a.createElement(_.a,{native:!0,onChange:function(t){return e.handleChange(t.target.value,"selectedStatus")},value:i},r.a.createElement("option",{value:"",className:"selectEmpty"},G.ALL),r.a.createElement("option",{value:"online"},G.ONLINE),r.a.createElement("option",{value:"offline"},G.OFFLINE)))),r.a.createElement(V.a,{item:!0,xs:4},r.a.createElement(j.a,{className:"formControl"},r.a.createElement("div",null,G.CUSTOMERS),r.a.createElement(_.a,{input:r.a.createElement(y.a,null),renderValue:function(e){return e.join(", ")},MenuProps:{PaperProps:{style:{maxHeight:224,width:250}}},multiple:!0,onChange:function(t){return e.handleChange(t.target.value,"selectedCustomer")},value:s},a.map((function(e){return r.a.createElement(w.a,{key:e.id,value:e.id},r.a.createElement(N.a,{checked:s.indexOf(e.id)>-1}),r.a.createElement(T.a,{primary:e.name}))}))))),r.a.createElement(V.a,{item:!0,xs:4},r.a.createElement(x.a,{variant:"contained",color:"primary",onClick:this.resetFilter,style:{marginTop:"25px"}},"Reset Filters")),r.a.createElement(V.a,{item:!0,xs:12},r.a.createElement(M.c,{width:250,height:250},r.a.createElement(M.b,{dataKey:"value",isAnimationActive:!1,data:u,cx:125,cy:125,outerRadius:80,fill:"#8884d8",label:!0},u.map((function(e,t){return r.a.createElement(M.a,{fill:e.color,key:t})}))),r.a.createElement(M.d,null))),r.a.createElement(V.a,{item:!0,xs:12},r.a.createElement(V.a,{item:!0,xs:12},a&&a.map((function(t){return e.renderCustomerCards(l,t)}))))))}}]),t}(a.Component),B=Object(f.b)((function(e){var t=e.vehicles,n=e.customers;return{data:t.data,loading:t.loading,customers:n.customers}}),{getVehiclesInfo:function(e){return{type:p,filter:e}},getCustomersInfo:function(e){return{type:E,filter:e}}})(H),W=n(28),J=n(203);function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(n,!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var q={data:[],overviewData:[],loading:!1};function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(n,!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var X={customers:[],loading:!1},Y=Object(W.c)({vehicles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return $({},e,{loading:!0});case"GET_VEHICLE_INFO_SUCCESS":return $({},e,{loading:!1,data:t.payload});case"GET_VEHICLE_INFO_FAILURE":return $({},e,{isError:!0,loading:!1,err:t.payload});default:return $({},e)}},customers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return Q({},e,{loading:!0});case"GET_CUSTOMERS_INFO_SUCCESS":return Q({},e,{loading:!1,customers:t.payload});case"GET_CUSTOMERS_INFO_FAILURE":return Q({},e,{isError:!0,loading:!1,err:t.payload});default:return Q({},e)}}}),Z=n(18),ee=n.n(Z),te=n(23),ne=n(95),ae=ee.a.mark(se),re=ee.a.mark(ie),ce=ee.a.mark(ue),oe=function(){var e=Object(ne.a)(ee.a.mark((function e(t){return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:3004/vehicles?_expand=customer").then((function(e){return e.json()})).catch((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function se(e){var t;return ee.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(te.b)(oe,e.filter);case 3:return t=n.sent,n.next=6,Object(te.d)(h(t));case 6:n.next=12;break;case 8:return n.prev=8,n.t0=n.catch(0),n.next=12,Object(te.d)(v(n.t0));case 12:case"end":return n.stop()}}),ae,null,[[0,8]])}function ie(){return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(te.e)(p,se);case 2:case"end":return e.stop()}}),re)}function ue(){return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(te.a)([Object(te.c)(ie)]);case 2:case"end":return e.stop()}}),ce)}var le=ee.a.mark(pe),me=ee.a.mark(Ee),de=ee.a.mark(he),fe=function(){var e=Object(ne.a)(ee.a.mark((function e(t){return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:3004/customers").then((function(e){return e.json()})).catch((function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function pe(e){var t;return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(te.b)(fe);case 3:return t=e.sent,e.next=6,Object(te.d)(g(t));case 6:e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(0),e.next=12,Object(te.d)(O(e.t0));case 12:case"end":return e.stop()}}),le,null,[[0,8]])}function Ee(){return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(te.e)(E,pe);case 2:case"end":return e.stop()}}),me)}function he(){return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(te.a)([Object(te.c)(Ee)]);case 2:case"end":return e.stop()}}),de)}var ve=ee.a.mark(ge);function ge(e){return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(te.a)([ue(),he()]);case 2:case"end":return e.stop()}}),ve)}var Oe=Object(J.a)(),be=[Oe];function Ie(e){var t=Object(W.e)(Y,e,Object(W.d)(W.a.apply(void 0,be)));return Oe.run(ge),t}var Se=function(){return r.a.createElement(f.a,{store:Ie()},r.a.createElement(B,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(Se,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[236,1,2]]]);
//# sourceMappingURL=main.0b647ad4.chunk.js.map